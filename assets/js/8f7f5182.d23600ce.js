"use strict";(self.webpackChunkckb_sdk=self.webpackChunkckb_sdk||[]).push([[9351],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,h=p["".concat(c,".").concat(m)]||p[m]||d[m]||i;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4915:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return d}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=(n(4996),["components"]),l={id:"v0difv1",title:"Comparison with EVM"},c="Difference between v0 and v1",s={unversionedId:"v0difv1",id:"v0difv1",title:"Comparison with EVM",description:"",source:"@site/docs/differenceBetweenV0AndV1.md",sourceDirName:".",slug:"/v0difv1",permalink:"/next/v0difv1",draft:!1,tags:[],version:"current",frontMatter:{id:"v0difv1",title:"Comparison with EVM"}},u={},d=[{value:"Layer2 Block interval",id:"layer2-block-interval",level:3},{value:"How to get layer1 block number",id:"how-to-get-layer1-block-number",level:3},{value:"Withdrawal time",id:"withdrawal-time",level:3},{value:"Failed transactions",id:"failed-transactions",level:3},{value:"Ethereum toolchain compatible",id:"ethereum-toolchain-compatible",level:3},{value:"CKB transfer",id:"ckb-transfer",level:3},{value:"CKB decimals",id:"ckb-decimals",level:3},{value:"Minimal gas price",id:"minimal-gas-price",level:3}],p={toc:d};function m(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"difference-between-v0-and-v1"},"Difference between v0 and v1"),(0,i.kt)("p",null,"Godwoken v1 is a release of the Godwoken source code and a standalone network. This release fixes many compatibility issues of the Godwoken v0 network. The following document explains the differences between the two versions."),(0,i.kt)("h3",{id:"layer2-block-interval"},"Layer2 Block interval"),(0,i.kt)("p",null,"The v0 network produces a new block every 48 seconds."),(0,i.kt)("p",null,"The block interval in the v1 network is dynamically adjusted. Currently, the interval is between 24 and 48 seconds. We may lowering the block interval to optimize the layer 2 TPS."),(0,i.kt)("h3",{id:"how-to-get-layer1-block-number"},"How to get layer1 block number"),(0,i.kt)("p",null,"Defi contracts often require interests to be calculated by block number, however, both v0 and v1 networks do not have a fixed layer2 block interval (it is affected by layer1 block interval)."),(0,i.kt)("p",null,"Arbitrum solved this issue by providing a syscall to get the layer1 block number. However, this does not work for Godwoken since the layer1 chain, CKB itself, does not have a fixed block interval (CKB block interval is adjusted by the uncle block rate at each epoch)."),(0,i.kt)("p",null,"We recommend developers use layer2 block timestamp as the trusted timestamp to calculate on-chain interests. More information is available in the following discussion thread:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://talk.nervos.org/t/how-to-get-layer-1-block-number-on-layer-2/6647"},"https://talk.nervos.org/t/how-to-get-layer-1-block-number-on-layer-2/6647")),(0,i.kt)("h3",{id:"withdrawal-time"},"Withdrawal time"),(0,i.kt)("p",null,"In the v0 network, the withdrawal time is 3 days."),(0,i.kt)("p",null,"In the v1 network, the withdrawal time is adjusted to 7 days. This gives more time for layer2 verification and challenge."),(0,i.kt)("h3",{id:"failed-transactions"},"Failed transactions"),(0,i.kt)("p",null,"In the v0 network, failed transactions are rejected by the client."),(0,i.kt)("p",null,"In the v1 network, failed transactions are packaged into layer2 blocks, and users must pay fees for the transactions. This behavior improves compatibility with the Ethereum toolchain and reduces vulnerabilities to DoS attacks."),(0,i.kt)("h3",{id:"ethereum-toolchain-compatible"},"Ethereum toolchain compatible"),(0,i.kt)("p",null,"In v0 network, developers must use the ",(0,i.kt)("inlineCode",{parentName:"p"},"polyjuice-provider"),"  plugin to interact with contracts."),(0,i.kt)("p",null,"In v1 network, developers can interact with contracts through web3 RPC. Ethereum tools such as Metamask can interact with Godwoken without modification."),(0,i.kt)("h3",{id:"ckb-transfer"},"CKB transfer"),(0,i.kt)("p",null,"In both v0 and v1, the transfer value transaction is unsupported. Users must transfer their CKB via the CKB ERC20 contract."),(0,i.kt)("h3",{id:"ckb-decimals"},"CKB decimals"),(0,i.kt)("p",null,"CKB is ",(0,i.kt)("inlineCode",{parentName:"p"},"8")," decimals on layer1. To be compatible with the Ethereum toolchain, we change the decimals of CKB to ",(0,i.kt)("inlineCode",{parentName:"p"},"18")," on layer 2 in order to make it the same as ETH."),(0,i.kt)("p",null,"Users operate CKB in Metamask or other Ethereum tools in ",(0,i.kt)("inlineCode",{parentName:"p"},"18")," decimals. In the contract, CKB is also represented in ",(0,i.kt)("inlineCode",{parentName:"p"},"18")," decimals."),(0,i.kt)("p",null,"A withdrawal from layer2 must be in ",(0,i.kt)("inlineCode",{parentName:"p"},"8")," decimals, so you cannot withdraw CKB that is less than ",(0,i.kt)("inlineCode",{parentName:"p"},"8")," decimals (less than ",(0,i.kt)("inlineCode",{parentName:"p"},"1 shannon"),") from layer2."),(0,i.kt)("h3",{id:"minimal-gas-price"},"Minimal gas price"),(0,i.kt)("p",null,"To prevent DoS attacks, a minimal gas price is introduced into the v1 network. Currently, the minimal gas price is around ",(0,i.kt)("inlineCode",{parentName:"p"},"0.00009 pCKB"),"(=",(0,i.kt)("a",{parentName:"p",href:"https://www.wolframalpha.com/input?i=9E13"},"9E13"),"), which means that a normal ERC20 transfer will cost less than $0.01."))}m.isMDXComponent=!0}}]);